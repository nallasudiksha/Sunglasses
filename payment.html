<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Checkout — Optic Boutique</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700;800&family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
<style>
 :root{ --bg:#071226; --muted:#a9b4c4; --accent:linear-gradient(90deg,#ff8a64,#ff5a8a); --glass-border: rgba(255,255,255,0.05) }
 *{box-sizing:border-box} body{margin:0;font-family:Inter,Poppins;background:var(--bg);color:#eaf1fb}
 header{position:sticky;top:0;padding:12px 20px;display:flex;gap:16px;align-items:center;background:rgba(255,255,255,0.02);border-bottom:1px solid var(--glass-border)}
 .container{max-width:980px;margin:28px auto;padding:0 18px; display:grid; grid-template-columns: 1fr 360px; gap:28px}
 .form{background:linear-gradient(180deg,rgba(255,255,255,0.02),transparent); padding:18px; border-radius:12px; border:1px solid var(--glass-border)}
 .summary{background:linear-gradient(180deg,rgba(255,255,255,0.02),transparent); padding:18px;border-radius:12px;border:1px solid var(--glass-border)}
 input,select{width:100%;padding:10px;margin:8px 0;border-radius:8px;border:1px solid rgba(255,255,255,0.04); background:transparent;color:inherit}
 .btn{padding:12px;border-radius:12px;border:0;cursor:pointer;font-weight:700}
 .btn.pay{background:linear-gradient(90deg,#ff8a64,#ff5a8a); color:white; width:100%}
 .note{color:var(--muted); font-size:13px}
 @media (max-width:900px){ .container{grid-template-columns:1fr} }
</style>
</head>
<body>
<header>
  <a href="index.html" style="color:inherit;text-decoration:none;font-weight:700">Optic Boutique</a>
  <nav style="margin-left:auto"><a href="products.html">Products</a> <a href="cart.html" style="margin-left:12px">Cart</a></nav>
</header>

<main class="container">
  <section class="form">
    <h2 style="margin-top:0">Payment Details</h2>
    <form id="payForm">
      <label>Full name</label>
      <input id="name" required placeholder="Jane Doe">

      <label>Email</label>
      <input id="email" required type="email" placeholder="jane@example.com">

      <label>Address</label>
      <input id="address" required placeholder="Street, City, State">

      <label>Card number</label>
      <input id="card" required placeholder="4242 4242 4242 4242">

      <div style="display:flex;gap:8px">
        <input id="exp" required placeholder="MM/YY">
        <input id="cvv" required placeholder="CVV">
      </div>

      <div style="margin-top:12px">
        <button type="submit" class="btn pay">Pay <span id="payAmount"></span></button>
      </div>
      <div style="margin-top:10px" class="note">This is a demo checkout — no real payment is processed.</div>
    </form>
  </section>

  <aside class="summary">
    <h3 style="margin-top:0">Order Summary</h3>
    <div id="items"></div>
    <hr style="border:none;border-top:1px solid rgba(255,255,255,0.04);margin:12px 0">
    <div style="display:flex;justify-content:space-between;color:var(--muted)"><div>Subtotal</div><div id="subtotal">₹0.00</div></div>
    <div style="display:flex;justify-content:space-between;margin-top:6px"><div>Shipping</div><div id="shipping">₹0.00</div></div>
    <div style="display:flex;justify-content:space-between;margin-top:12px;font-weight:800;font-size:1.2rem"><div>Total</div><div id="total">₹0.00</div></div>
  </aside>
</main>

<script>
  function getCart(){ return JSON.parse(localStorage.getItem('ob_cart')||'[]') }
  function clearCart(){ localStorage.removeItem('ob_cart'); window.dispatchEvent(new Event('storage')) }

  function renderSummary(){
    const cart = getCart();
    const itemsEl = document.getElementById('items');
    itemsEl.innerHTML = '';
    let subtotal = 0;
    if(cart.length===0){ itemsEl.innerHTML = '<div style="color:var(--muted)">Your cart is empty. <a href="products.html">Shop</a></div>' }
    cart.forEach(it=>{
      subtotal += it.price * it.qty;
      const d = document.createElement('div'); d.style.display='flex'; d.style.justifyContent='space-between'; d.style.marginBottom='8px';
      d.innerHTML = `<div style="display:flex;gap:10px;align-items:center"><img src="${it.img}" style="width:56px;height:44px;object-fit:cover;border-radius:8px;"><div><div style="font-weight:700">${it.title}</div><div style="color:var(--muted);font-size:13px">x${it.qty}</div></div></div><div>₹${(it.price*it.qty).toFixed(2)}</div>`;
      itemsEl.appendChild(d);
    });
    const shipping = subtotal > 1999 || subtotal===0 ? 0 : 99;
    document.getElementById('subtotal').textContent = '₹' + subtotal.toFixed(2);
    document.getElementById('shipping').textContent = '₹' + shipping.toFixed(2);
    document.getElementById('total').textContent = '₹' + (subtotal + shipping).toFixed(2);
    document.getElementById('payAmount').textContent = '— ' + (subtotal + shipping).toFixed(2);
  }

  renderSummary();

  document.getElementById('payForm').addEventListener('submit', function(e){
    e.preventDefault();
    // simple validation
    const cart = getCart();
    if(cart.length===0){ alert('Cart is empty'); location.href='products.html'; return; }
    // In a real app: send to server / payment gateway
    // Here: store order summary and clear cart, go to thankyou.html
    const order = {
      id: 'ord_' + Date.now(),
      name: document.getElementById('name').value,
      email: document.getElementById('email').value,
      total: document.getElementById('total').textContent,
      items: cart
    };
    localStorage.setItem('ob_last_order', JSON.stringify(order));
    clearCart();
    // small delay then navigate
    setTimeout(()=> location.href = 'thankyou.html', 400);
  });
</script>
</body>
</html>
